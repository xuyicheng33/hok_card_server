# çŽ‹è€…è£è€€å¡ç‰Œæ¸¸æˆæœåŠ¡å™¨

WebSocketæœåŠ¡å™¨ï¼Œç”¨äºŽæ”¯æŒåœ¨çº¿åŒäººå¯¹æˆ˜åŠŸèƒ½ã€‚

## ðŸ“‹ å‰ç½®è¦æ±‚

- Node.js >= 14.0.0
- npm æˆ– yarn

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨æœåŠ¡å™¨

```bash
npm start
```

### 3. å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰

```bash
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ã€‚

## ðŸ”§ é…ç½®

### ä¿®æ”¹ç«¯å£

åœ¨`server.js`ä¸­æˆ–ä½¿ç”¨çŽ¯å¢ƒå˜é‡ï¼š

```bash
PORT=8080 npm start
```

### ç”Ÿäº§çŽ¯å¢ƒ

1. ä¿®æ”¹CORSè®¾ç½®ï¼ˆé™åˆ¶æ¥æºåŸŸåï¼‰
2. ä½¿ç”¨HTTPSï¼ˆwss://ï¼‰
3. æ·»åŠ è®¤è¯æœºåˆ¶
4. é…ç½®è´Ÿè½½å‡è¡¡

## ðŸ“¡ APIæŽ¥å£

### GET /
å¥åº·æ£€æŸ¥ï¼Œè¿”å›žæœåŠ¡å™¨çŠ¶æ€

### GET /api/rooms
èŽ·å–å½“å‰æˆ¿é—´åˆ—è¡¨

## ðŸŽ® WebSocketäº‹ä»¶

### å®¢æˆ·ç«¯â†’æœåŠ¡å™¨

- `create_room` - åˆ›å»ºæˆ¿é—´
- `join_room` - åŠ å…¥æˆ¿é—´
- `start_game` - å¼€å§‹æ¸¸æˆï¼ˆä»…æˆ¿ä¸»ï¼‰
- `game_action` - æ¸¸æˆæ“ä½œï¼ˆæ”»å‡»ã€æŠ€èƒ½ç­‰ï¼‰

### æœåŠ¡å™¨â†’å®¢æˆ·ç«¯

- `welcome` - æ¬¢è¿Žæ¶ˆæ¯
- `room_created` - æˆ¿é—´åˆ›å»ºæˆåŠŸ
- `room_joined` - æˆåŠŸåŠ å…¥æˆ¿é—´
- `opponent_joined` - å¯¹æ‰‹åŠ å…¥
- `game_start` - æ¸¸æˆå¼€å§‹
- `opponent_action` - å¯¹æ‰‹æ“ä½œ
- `opponent_disconnected` - å¯¹æ‰‹æ–­å¼€
- `error` - é”™è¯¯æ¶ˆæ¯

## ðŸ› è°ƒè¯•

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
DEBUG=* npm start
```

## ðŸš¢ éƒ¨ç½²

### Railway

```bash
# åœ¨Railwayä¸­åˆ›å»ºæ–°é¡¹ç›®
# è¿žæŽ¥GitHubä»“åº“
# Railwayä¼šè‡ªåŠ¨æ£€æµ‹package.jsonå¹¶éƒ¨ç½²
```

### Render

1. åˆ›å»ºæ–°çš„Web Service
2. è¿žæŽ¥ä»“åº“
3. Buildå‘½ä»¤: `npm install`
4. Startå‘½ä»¤: `npm start`

### Fly.io

```bash
flyctl launch
flyctl deploy
```

## ðŸ“Š ç›‘æŽ§

- å½“å‰æˆ¿é—´æ•°é‡
- åœ¨çº¿çŽ©å®¶æ•°é‡
- æœåŠ¡å™¨è¿è¡Œæ—¶é—´

è®¿é—®æ ¹è·¯å¾„æŸ¥çœ‹: `http://localhost:3000`

## âš ï¸ æ³¨æ„äº‹é¡¹

1. æˆ¿é—´ä¼šåœ¨30åˆ†é’Ÿæ— æ´»åŠ¨åŽè‡ªåŠ¨æ¸…ç†
2. æˆ¿é—´æ»¡å‘˜ï¼ˆ2äººï¼‰åŽè‡ªåŠ¨å¼€å§‹æ¸¸æˆ
3. ä»»ä¸€çŽ©å®¶æ–­å¼€è¿žæŽ¥ä¼šé€šçŸ¥å¯¹æ‰‹

## ðŸ“ æ—¥å¿—

æœåŠ¡å™¨ä¼šè¾“å‡ºä»¥ä¸‹æ—¥å¿—ï¼š

- `[è¿žæŽ¥]` - çŽ©å®¶è¿žæŽ¥/æ–­å¼€
- `[åˆ›å»ºæˆ¿é—´]` - æˆ¿é—´åˆ›å»º
- `[åŠ å…¥æˆ¿é—´]` - çŽ©å®¶åŠ å…¥
- `[æ¸¸æˆå¼€å§‹]` - æ¸¸æˆå¼€å§‹
- `[æ¸¸æˆæ“ä½œ]` - æ¸¸æˆä¸­çš„æ“ä½œ
- `[é”™è¯¯]` - é”™è¯¯ä¿¡æ¯
- `[æ¸…ç†]` - æˆ¿é—´æ¸…ç†

## ðŸ” å®‰å…¨å»ºè®®

**ç”Ÿäº§çŽ¯å¢ƒå¿…é¡»**ï¼š

1. é™åˆ¶CORSæ¥æº
2. æ·»åŠ é€ŸçŽ‡é™åˆ¶
3. å®žçŽ°çŽ©å®¶è®¤è¯
4. ä½¿ç”¨HTTPS/WSS
5. è¾“å…¥éªŒè¯å’Œæ¸…ç†
6. é˜²æ­¢ä½œå¼Šæ£€æµ‹

##äºº æµ‹è¯•

ä½¿ç”¨Socket.ioå®¢æˆ·ç«¯æµ‹è¯•ï¼š

```javascript
const io = require('socket.io-client');
const socket = io('http://localhost:3000');

socket.on('connect', () => {
  console.log('å·²è¿žæŽ¥');
  socket.emit('create_room', { 
    player_name: 'æµ‹è¯•çŽ©å®¶',
    battle_mode: '2v2'
  });
});

socket.on('room_created', (data) => {
  console.log('æˆ¿é—´åˆ›å»º:', data);
});
```
